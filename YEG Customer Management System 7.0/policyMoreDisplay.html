<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Management System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@500&display=swap" rel="stylesheet">
    <style>
        .header {
            background-color: rgba(255, 166, 0, 0.148);
            border-bottom: 1px solid #ddd;
            padding: 20px;
            text-align: center;
            justify-content: space-between;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .logo {
            width: 150px;
            height: auto;
            margin-left: 20px;
        }

        h1 {
            font-family: 'Roboto', Arial, sans-serif;
            margin: 0;
            color: #ff6f00;
            font-size: 26px;
            text-align: center;
            flex-grow: 1;
        }

        .edit-button,
        .delete-button,
        .back-button {
            padding: 12px 25px;
            background-color: #ff6f00;
            color: white;
            font-size: 14px;
            text-decoration: none;
            border-radius: 30px;
            display: inline-block;
            margin-right: 15px;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
        }

        .home-button {
            padding: 12px 25px;
            background-color: #ff6f00;
            color: white;
            font-size: 14px;
            text-decoration: none;
            border-radius: 30px;
            display: inline-block;
            margin-right: 15px;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
            margin-left: 20px;
        }

        .home-button:hover,
        .back-button:hover {
            background-color: #ff8c00;
        }

        /* Table Styling */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 10px 20px;
            text-align: center;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        th {
            background-color: rgba(255, 166, 0, 0.037);
            color: #000000;
            font-size: 16px;
        }

        td {
            background-color: #fff;
            color: #333;
        }

        td:hover {
            background-color: #f7f7f7;
            transform: scale(1.02);
        }

        /* Media Query for Small Screens */
        @media screen and (max-width: 768px) {
            .search-container {
                flex-direction: column;
                gap: 10px;
            }

            table {
                font-size: 14px;
            }

            th,
            td {
                padding: 8px;
            }
        }

        /* Animations for elements */
        .fade-in {
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }
    </style>
</head>

<body>
    <div class="header">
        <img class="logo" src="YEGlogo.png">
        <h1>Client Management System - Policy Details</h1>
        <span id="agentDisplay" style="margin-left: 10px; margin-right: 10px; font-size: 18px; color: gray;"></span>
    </div>
    <div>
        <button class="back-button" id="backButton" onclick="window.location.href='viewPolicy.html';">Back</button>
        <button class="home-button" id="homeButton" onclick="window.location.href='home3.html';">Home</button>
    </div>
    <div class="container">
        <h3>Plan Description</h3>
        <table>
            <thead>
                <tr>
                    <th>Company</th>
                    <th>Plan Name</th>
                    <th>Policy No</th>
                    <th>Commence Date</th>
                    <th>Maturity Date</th>
                    <th>Premium End Date</th>
                    <th>Type of Plan</th>
                    <th>Payment Mode</th>
                    <th>Payment Method</th>
                    <th>Premium</th>
                </tr>
            </thead>
            <tbody id="policyTableBody"></tbody>
        </table>

        <h3>Plan Coverage</h3>
        <table>
            <thead>
                <tr>
                    <th>Death/TPD</th>
                    <th>Disability Income</th>
                    <th>Additional Death</th>
                    <th>Personal Accident</th>
                    <th>Accidental Medical Fees</th>
                    <th>Accidental Weekly Income</th>
                    <th>Critical illness</th>
                    <th>Early Critical Illness</th>
                    <th>Multi Critical Illness</th>
                    <th>Lady Care</th>
                    <th>TPD & CI Premium Waiver</th>
                    <th>Parent Waiver</th>
                    <th>2 Parent Waiver</th>
                </tr>
            </thead>
            <tbody id="policyPlanCoverage"></tbody>
        </table>

        <h3>Hospitalization Benefits</h3>
        <table>
            <thead>
                <tr>
                    <th>Hospital Income(RM)</th>
                    <th>Daily Room & Board</th>
                    <th>Annual Limit(RM)</th>
                    <th>Life Time Limit(RM)</th>
                    <th>MedSaver/Deductible(RM)</th>
                    <th>Annual Limit Increment</th>
                </tr>
            </thead>
            <tbody id="policyHospitalizationBenefits"></tbody>
        </table>

        <h3>Nominee & Trustee</h3>
        <table>
            <thead>
                <tr>
                    <th>Nominee 1</th>
                    <th>Nominee 2</th>
                    <th>Nominee 3</th>
                    <th>Nominee 4</th>
                    <th>Trustee</th>
                </tr>
            </thead>
            <tbody id="policyNomineeTrustee"></tbody>
        </table>

        <h3>Policy Value</h3>
        <table>
            <thead>
                <tr>
                    <th>Total Investment Value(RM)</th>
                    <th>Survival Benefit(RM)</th>
                    <th>Cash Bonus(RM)</th>
                    <th>Surrender Value(RM)</th>
                    <th>Policy Loan/APL(RM)</th>
                </tr>
            </thead>
            <tbody id="policyValue"></tbody>
        </table>
        <div>
            <button class="edit-button" onclick="editPolicy()">Edit</button>
            <button class="delete-button" onclick="confirmDeletePolicy()">Delete Policy</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
        import { getDatabase, ref, get, remove, update } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "API_KEY",
            authDomain: "yeg2-31e6e.firebaseapp.com",
            databaseURL: "https://yeg2-31e6e-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "yeg2-31e6e",
            storageBucket: "yeg2-31e6e.appspot.com",
            messagingSenderId: "SENDER_ID",
            appId: "APP_ID",
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        

        async function loadPolicyData() {
            const params = new URLSearchParams(window.location.search);
            const policyNoFromUrl = params.get('policyNo'); // Get the policyNo from the URL
            const clientId = params.get('clientId'); // Get the clientId from the URL
            const agentId = localStorage.getItem("loggedInAgentId");

            // Debugging output to the console
            console.log("Policy No from URL:", policyNoFromUrl); // Check if this is null or undefined
            console.log("Agent ID from localStorage:", agentId);
            console.log("Client ID from URL:", clientId);

            // Check if agentId and policyNo are valid
            if (!agentId) {
                alert("Agent ID not found in localStorage.");
                return;
            }

            if (!policyNoFromUrl) {
                alert("Policy No is missing in the URL.");
                return;
            }

            if (!clientId) {
                alert("Client ID is missing in the URL.");
                return;
            }

            // Fetch policy data from Firebase using the policyNo and agentId
            const policyRef = ref(database, `agents/${agentId}/clients/${clientId}/policies/${policyNoFromUrl}`);
            try {
                const snapshot = await get(policyRef);
                if (snapshot.exists()) {
                    const policy = snapshot.val();
                    console.log("Policy data retrieved from Firebase:", policy);
                    displayPolicyData(policy); // Display the policy data on the page
                } else {
                    console.log("No policy data found for policyNo:", policyNoFromUrl);
                    displayNoDataMessage(); // Show a message when no data is found
                }
            } catch (error) {
                console.error("Error fetching policy data from Firebase:", error);
                alert("Failed to fetch data from Firebase.");
            }
        }

        function displayPolicyData(policy) {
            const descriptionTableBody = document.querySelector("#policyTableBody");
            const coverageTableBody = document.querySelector("#policyPlanCoverage");
            const benefitsTableBody = document.querySelector("#policyHospitalizationBenefits");
            const nomineeTableBody = document.querySelector("#policyNomineeTrustee");
            const valueTableBody = document.querySelector("#policyValue");

            // Reset tables before appending data
            descriptionTableBody.innerHTML = "";
            coverageTableBody.innerHTML = "";
            benefitsTableBody.innerHTML = "";
            nomineeTableBody.innerHTML = "";
            valueTableBody.innerHTML = "";

            // Display policy description data
            const descriptionRow = document.createElement("tr");
            descriptionRow.innerHTML = `
                <td>${policy["Company"] || "N/A"}</td>
                <td>${policy["Plan Name"] || "N/A"}</td>
                <td>${policy["PolicyNo"] || "N/A"}</td>
                <td>${policy["Commence Date"] || "N/A"}</td>
                <td>${policy["Maturity Date"] || "N/A"}</td>
                <td>${policy["Premium End Date"] || "N/A"}</td>
                <td>${policy["Type of Plan"] || "N/A"}</td>
                <td>${policy["Payment Mode"] || "N/A"}</td>
                <td>${policy["Payment Method"] || "N/A"}</td>
                <td>${policy["Premium"] || "N/A"}</td>
            `;
            descriptionTableBody.appendChild(descriptionRow);

            // Display policy coverage data
            const coverageRow = document.createElement("tr");
            coverageRow.innerHTML = `
                <td>${policy["Death TPD"] || "N/A"}</td>
                <td>${policy["Disability Income"] || "N/A"}</td>
                <td>${policy["Additional Death"] || "N/A"}</td>
                <td>${policy["Personal Accident"] || "N/A"}</td>
                <td>${policy["Accidental Medical Fees"] || "N/A"}</td>
                <td>${policy["Accidental Weekly Income"] || "N/A"}</td>
                <td>${policy["Critical illness"] || "N/A"}</td>
                <td>${policy["Early Critical Illness"] || "N/A"}</td>
                <td>${policy["Multi Critical Illness"] || "N/A"}</td>
                <td>${policy["Lady Care"] || "N/A"}</td>
                <td>${policy["TPD & CI Premium Waiver"] || "N/A"}</td>
                <td>${policy["Parent Waiver"] || "N/A"}</td>
                <td>${policy["2 Parent Waiver"] || "N/A"}</td>
            `;
            coverageTableBody.appendChild(coverageRow);

            // Display hospitalization benefits data
            const benefitsRow = document.createElement("tr");
            benefitsRow.innerHTML = `
                <td>${policy["Hospital Income"] || "N/A"}</td>
                <td>${policy["Daily Room Board"] || "N/A"}</td>
                <td>${policy["Annual Limit"] || "N/A"}</td>
                <td>${policy["Life Time Limit"] || "N/A"}</td>
                <td>${policy["MedSaver Deductible"] || "N/A"}</td>
                <td>${policy["Annual Limit Increment"] || "N/A"}</td>
            `;
            benefitsTableBody.appendChild(benefitsRow);

            // Display nominee and trustee data
            const nomineeRow = document.createElement("tr");
            nomineeRow.innerHTML = `
                <td>${policy["Nominee 1"] || "N/A"}</td>
                <td>${policy["Nominee 2"] || "N/A"}</td>
                <td>${policy["Nominee 3"] || "N/A"}</td>
                <td>${policy["Nominee 4"] || "N/A"}</td>
                <td>${policy["Trustee"] || "N/A"}</td>
            `;
            nomineeTableBody.appendChild(nomineeRow);

            // Display policy value data
            const valueRow = document.createElement("tr");
            valueRow.innerHTML = `
                <td>${policy["Total Investment Value"] || "N/A"}</td>
                <td>${policy["Survival Benefit"] || "N/A"}</td>
                <td>${policy["Cash Bonus"] || "N/A"}</td>
                <td>${policy["Surrender Value"] || "N/A"}</td>
                <td>${policy["Policy Loan APL"] || "N/A"}</td>
            `;
            valueTableBody.appendChild(valueRow);
        }

        function displayNoDataMessage() {
            const descriptionTableBody = document.querySelector("#policyTableBody");
            descriptionTableBody.innerHTML = "<tr><td colspan='10'>No policy data available</td></tr>";

            const coverageTableBody = document.querySelector("#policyPlanCoverage");
            coverageTableBody.innerHTML = "<tr><td colspan='13'>No policy data available</td></tr>";

            const benefitsTableBody = document.querySelector("#policyHospitalizationBenefits");
            benefitsTableBody.innerHTML = "<tr><td colspan='6'>No policy data available</td></tr>";

            const nomineeTableBody = document.querySelector("#policyNomineeTrustee");
            nomineeTableBody.innerHTML = "<tr><td colspan='5'>No policy data available</td></tr>";

            const valueTableBody = document.querySelector("#policyValue");
            valueTableBody.innerHTML = "<tr><td colspan='5'>No policy data available</td></tr>";
        }

        // Confirm delete policy
        function confirmDeletePolicy() {
            if (confirm("Are you sure you want to delete this policy?")) {
                deletePolicy();
            }
        }

        // Delete policy from Firebase
        async function deletePolicy() {
            const params = new URLSearchParams(window.location.search);
            const policyNoFromUrl = params.get('policyNo');
            const clientId = params.get('clientId');
            const agentId = localStorage.getItem("loggedInAgentId");

            const policyRef = ref(database, `agents/${agentId}/clients/${clientId}/policies/${policyNoFromUrl}`);
            try {
                await remove(policyRef);
                alert("Policy deleted successfully.");
                window.location.href = `viewPolicy.html?clientId=${clientId}`;
            } catch (error) {
                console.error("Error deleting policy:", error);
                alert("Failed to delete policy.");
            }
        }

        let isEditing = false;
        // Toggle edit mode
        function editPolicy() {
            // Get the current data from the table
            const descriptionTableBody = document.querySelector("#policyTableBody");
            const coverageTableBody = document.querySelector("#policyPlanCoverage");
            const benefitsTableBody = document.querySelector("#policyHospitalizationBenefits");
            const nomineeTableBody = document.querySelector("#policyNomineeTrustee");
            const valueTableBody = document.querySelector("#policyValue");

            const editButton = document.querySelector(".edit-button");

            if (isEditing) {
                // If already in editing mode, save changes and switch back to view mode
                savePolicy();
                revertTableToText(descriptionTableBody);
                revertTableToText(coverageTableBody);
                revertTableToText(benefitsTableBody);
                revertTableToText(nomineeTableBody);
                revertTableToText(valueTableBody);

                // Change button text back to "Edit"
                editButton.textContent = "Edit";
            } else {
                // If in view mode, convert the table data to input fields for editing
                convertTableToInput(descriptionTableBody);
                convertTableToInput(coverageTableBody);
                convertTableToInput(benefitsTableBody);
                convertTableToInput(nomineeTableBody);
                convertTableToInput(valueTableBody);

                // Change button text to "Save"
                editButton.textContent = "Save";
            }

            // Toggle editing state
            isEditing = !isEditing;
        }

        const companyOptions = ["AIA", "Allianz", "AmMetlife", "Etiqa", "FWD", "GEGM", "Generali", "HLA", "Manulife", "MCIS", "Prudential", "Sunlife", "Tokio Marine", "Zurich"];
        const planTypeOptions = ["Investment_Linked", "WholeLife", "Endowment", "Term", "Annuity"];
        const paymentModeOptions = ["Monthly", "Quarterly", "Half-Yearly", "Annual"];
        const paymentMethodOptions = ["Cash/Cheque", "Auto-Debit", "Debit/Credit Card"];
        const TPDOptions = ["YES", "NO"];
        const parentOptions = ["YES", "NO"];
        const parentWaiverOptions = ["YES", "NO"];
        const DailyRoomOptions = ["100", "150", "200", "250", "300", "350", "400", "450", "500"];
        const AnnualLimitOptions = ["YES", "NO"];
        const nomineeOneOptions = ["Aunty", "Brother", "Child", "Father", "Friend", "Grandchildren", "GrandParents", "Husband", "Legal Guaardian", "Mother", "Nephew/Niece", "Sister", "Uncle", "Wife"];
        const nomineeTwoOptions = ["Aunty", "Brother", "Child", "Father", "Friend", "Grandchildren", "GrandParents", "Husband", "Legal Guaardian", "Mother", "Nephew/Niece", "Sister", "Uncle", "Wife"];
        const nomineeThreeOptions = ["Aunty", "Brother", "Child", "Father", "Friend", "Grandchildren", "GrandParents", "Husband", "Legal Guaardian", "Mother", "Nephew/Niece", "Sister", "Uncle", "Wife"];
        const nomineeFourOptions = ["Aunty", "Brother", "Child", "Father", "Friend", "Grandchildren", "GrandParents", "Husband", "Legal Guaardian", "Mother", "Nephew/Niece", "Sister", "Uncle", "Wife"];
        const trusteeOptions = ["Aunty", "Brother", "Child", "Father", "Friend", "Grandchildren", "GrandParents", "Husband", "Legal Guaardian", "Mother", "Nephew/Niece", "Sister", "Uncle", "Wife"];
        // Convert table data to input fields
        function convertTableToInput(tableBody) {
            const rows = tableBody.querySelectorAll("tr");
            rows.forEach(row => {
                const cells = row.querySelectorAll("td");
                cells.forEach((cell, index) => {
                    if (!cell.querySelector("input") && !cell.querySelector("select")) {
                        const cellText = cell.textContent.trim();

                        if (index === 0 && tableBody.id === "policyTableBody") {
                            // **"Company" 字段（第1列）使用下拉选择框**
                            cell.textContent = "";
                            cell.appendChild(createDropdown(companyOptions, cellText));
                        } else if (index === 6 && tableBody.id === "policyTableBody") {
                            cell.textContent = "";
                            cell.appendChild(createDropdown(planTypeOptions, cellText));
                        } else if (index === 7 && tableBody.id === "policyTableBody") {
                            cell.textContent = "";
                            cell.appendChild(createDropdown(paymentModeOptions, cellText));
                        } else if (index === 8 && tableBody.id === "policyTableBody") {
                            cell.textContent = "";
                            cell.appendChild(createDropdown(paymentMethodOptions, cellText));
                        } else if (index === 10 && tableBody.id === "policyPlanCoverage") {
                            // "Parent Waiver" 字段（第11列）使用下拉选择框
                            cell.textContent = "";
                            cell.appendChild(createDropdown(TPDOptions, cellText));
                        } else if (index === 11 && tableBody.id === "policyPlanCoverage") {
                            // "Parent Waiver" 字段（第11列）使用下拉选择框
                            cell.textContent = "";
                            cell.appendChild(createDropdown(parentOptions, cellText));
                        } else if (index === 12 && tableBody.id === "policyPlanCoverage") {
                            // "Parent Waiver" 字段（第11列）使用下拉选择框
                            cell.textContent = "";
                            cell.appendChild(createDropdown(parentWaiverOptions, cellText));
                        } else if (index === 1 && tableBody.id === "policyHospitalizationBenefits") {
                            // "Parent Waiver" 字段（第11列）使用下拉选择框
                            cell.textContent = "";
                            cell.appendChild(createDropdown(DailyRoomOptions, cellText));
                        } else if (index === 5 && tableBody.id === "policyHospitalizationBenefits") {
                            // "Parent Waiver" 字段（第11列）使用下拉选择框
                            cell.textContent = "";
                            cell.appendChild(createDropdown(AnnualLimitOptions, cellText));
                        } else if (index === 0 && tableBody.id === "policyNomineeTrustee") {
                            // "Parent Waiver" 字段（第11列）使用下拉选择框
                            cell.textContent = "";
                            cell.appendChild(createDropdown(nomineeOneOptions, cellText));
                        } else if (index === 1 && tableBody.id === "policyNomineeTrustee") {
                            // "Parent Waiver" 字段（第11列）使用下拉选择框
                            cell.textContent = "";
                            cell.appendChild(createDropdown(nomineeTwoOptions, cellText));
                        } else if (index === 2 && tableBody.id === "policyNomineeTrustee") {
                            // "Parent Waiver" 字段（第11列）使用下拉选择框
                            cell.textContent = "";
                            cell.appendChild(createDropdown(nomineeThreeOptions, cellText));
                        } else if (index === 3 && tableBody.id === "policyNomineeTrustee") {
                            // "Parent Waiver" 字段（第11列）使用下拉选择框
                            cell.textContent = "";
                            cell.appendChild(createDropdown(nomineeFourOptions, cellText));
                        } else if (index === 4 && tableBody.id === "policyNomineeTrustee") {
                            // "Parent Waiver" 字段（第11列）使用下拉选择框
                            cell.textContent = "";
                            cell.appendChild(createDropdown(trusteeOptions, cellText));
                        }else {
                            const input = document.createElement("input");
                            input.type = "text";
                            input.value = cellText;
                            cell.textContent = "";
                            cell.appendChild(input);
                        }
                    }
                });
            });
        }

        // 创建通用的下拉菜单
        function createDropdown(optionsArray, selectedValue) {
            const select = document.createElement("select");

            optionsArray.forEach(option => {
                const optionElement = document.createElement("option");
                optionElement.value = option;
                optionElement.textContent = option;
                if (option === selectedValue) {
                    optionElement.selected = true;
                }
                select.appendChild(optionElement);
            });

            return select;
        }

        function revertTableToText(tableBody) {
            const rows = tableBody.querySelectorAll("tr");
            rows.forEach(row => {
                const cells = row.querySelectorAll("td");
                cells.forEach(cell => {
                    const input = cell.querySelector("input");
                    const select = cell.querySelector("select");
                    if (input) {
                        // 获取 input 的值并更新回 td
                        cell.textContent = input.value.trim();
                    } else if (select) {
                        // 获取 select 选中的值并更新回 td
                        cell.textContent = select.options[select.selectedIndex].text;
                    }
                });
            });
        }

        // Save the edited policy data to Firebase
        async function savePolicy() {
            const params = new URLSearchParams(window.location.search);
            const policyNoFromUrl = params.get('policyNo');
            const clientId = params.get('clientId');
            const agentId = localStorage.getItem("loggedInAgentId");

            const policyRef = ref(database, `agents/${agentId}/clients/${clientId}/policies/${policyNoFromUrl}`);

            // Collect data from the input fields
            const policyData = collectPolicyData();

            // Update Firebase with the edited data
            try {
                await update(policyRef, policyData);
                alert("Policy updated successfully.");
                window.location.reload();
            } catch (error) {
                console.error("Error updating policy:", error);
                alert("Failed to update policy.");
            }
        }

        // Collect data from input fields
        function collectPolicyData() {
            const policyData = {};

            const descriptionInputs = document.querySelectorAll("#policyTableBody input, #policyTableBody select"); // 包括 select
            const coverageInputs = document.querySelectorAll("#policyPlanCoverage input, #policyPlanCoverage select");
            const benefitsInputs = document.querySelectorAll("#policyHospitalizationBenefits input, #policyHospitalizationBenefits select");
            const nomineeInputs = document.querySelectorAll("#policyNomineeTrustee input, #policyNomineeTrustee select");
            const valueInputs = document.querySelectorAll("#policyValue input");

            const fields = [
                "Company", "Plan Name", "PolicyNo", "Commence Date", "Maturity Date",
                "Premium End Date", "Type of Plan", "Payment Mode", "Payment Method", "Premium"
            ];

            descriptionInputs.forEach((input, index) => {
                policyData[fields[index]] = input.value || "N/A";
            });

            const coverageFields = [
                "Death TPD", "Disability Income", "Additional Death", "Personal Accident",
                "Accidental Medical Fees", "Accidental Weekly Income", "Critical illness",
                "Early Critical Illness", "Multi Critical Illness", "Lady Care",
                "TPD & CI Premium Waiver", "Parent Waiver", "2 Parent Waiver"
            ];

            coverageInputs.forEach((input, index) => {
                policyData[coverageFields[index]] = input.value || "N/A";
            });

            const benefitsFields = [
                "Hospital Income", "Daily Room Board", "Annual Limit",
                "Life Time Limit", "MedSaver Deductible", "Annual Limit Increment"
            ];

            benefitsInputs.forEach((input, index) => {
                policyData[benefitsFields[index]] = input.value || "N/A";
            });

            const nomineeFields = ["Nominee 1", "Nominee 2", "Nominee 3", "Nominee 4", "Trustee"];
            nomineeInputs.forEach((input, index) => {
                policyData[nomineeFields[index]] = input.value || "N/A";
            });

            const valueFields = [
                "Total Investment Value", "Survival Benefit", "Cash Bonus",
                "Surrender Value", "Policy Loan APL"
            ];
            valueInputs.forEach((input, index) => {
                policyData[valueFields[index]] = input.value || "N/A";
            });

            return policyData;
        }

        window.onload = loadPolicyData;
        window.editPolicy = editPolicy;
        window.confirmDeletePolicy = confirmDeletePolicy;

        document.getElementById("backButton").addEventListener("click", () => {
            window.history.back(); // Navigates back to the previous page
        });

        document.getElementById("logoutButton").addEventListener("click", () => {
            window.location.href = "login.html";
        });
    </script>
</body>

</html>
